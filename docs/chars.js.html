<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>chars.js - Documentation</title>

    <script src="scripts/prettify/prettify.js"></script>
    <script src="scripts/prettify/lang-css.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="https://code.ionicframework.com/ionicons/2.0.1/css/ionicons.min.css">
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>
<body>

<input type="checkbox" id="nav-trigger" class="nav-trigger" />
<label for="nav-trigger" class="navicon-button x">
  <div class="navicon"></div>
</label>

<label for="nav-trigger" class="overlay"></label>

<nav>
    <li class="nav-link nav-home-link"><a href="index.html">Home</a></li><li class="nav-heading">Tutorials</li><li class="nav-item"><a href="tutorial-functions.html">functions</a></li><li class="nav-heading">Classes</li><li class="nav-heading"><span class="nav-item-type type-class">C</span><span class="nav-item-name"><a href="Basura.html">Basura</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Basura.html#.quoteSymbols">quoteSymbols</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Basura.html#_pick">_pick</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Basura.html#_randBytes">_randBytes</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Basura.html#_random01">_random01</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Basura.html#_randomGauss">_randomGauss</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Basura.html#_randUBigInt">_randUBigInt</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Basura.html#_randUInt32">_randUInt32</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Basura.html#_some">_some</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Basura.html#_upto">_upto</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Basura.html#generate">generate</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Basura.html#generate_Array">generate_Array</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Basura.html#generate_bigint">generate_bigint</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Basura.html#generate_boolean">generate_boolean</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Basura.html#generate_Boolean">generate_Boolean</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Basura.html#generate_Buffer">generate_Buffer</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Basura.html#generate_Date">generate_Date</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Basura.html#generate_function">generate_function</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Basura.html#generate_integer">generate_integer</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Basura.html#generate_Map">generate_Map</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Basura.html#generate_number">generate_number</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Basura.html#generate_Number">generate_Number</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Basura.html#generate_object">generate_object</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Basura.html#generate_Proxy">generate_Proxy</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Basura.html#generate_RegExp">generate_RegExp</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Basura.html#generate_Set">generate_Set</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Basura.html#generate_string">generate_string</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Basura.html#generate_String">generate_String</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Basura.html#generate_symbol">generate_symbol</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Basura.html#generate_TypedArray">generate_TypedArray</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Basura.html#generate_undefined">generate_undefined</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Basura.html#generate_URL">generate_URL</a></span></li><li class="nav-heading"><span class="nav-item-type type-class">C</span><span class="nav-item-name"><a href="Chars.html">Chars</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Chars.html#get">get</a></span></li><li class="nav-heading"><span class="nav-item-type type-class">C</span><span class="nav-item-name"><a href="Scripts.html">Scripts</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Scripts.html#.instance">instance</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Scripts.html#get">get</a></span></li><li class="nav-heading"><a href="global.html">Globals</a></li>
</nav>

<div id="main">
    
    <h1 class="page-title">chars.js</h1>
    

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>'use strict'

const fs = require('fs')
const path = require('path')
const UnicodeTrie = require('unicode-trie')

/**
 * Information about all relevant Unicode codepoints.  Irrelevant codepoints
 * include ones that are unassigned, half surrogates, etc.
 */
class Chars {
  /**
   * Construct an instance.  This reads from `data/data.trie` and
   * `data/data.json` synchronously.  Those files are created by
   * `tools/create.js`.
   */
  constructor() {
    this.trie = new UnicodeTrie(fs.readFileSync(
      path.join(__dirname, '..', 'data', 'data.trie')
    ))
    this.data = JSON.parse(fs.readFileSync(
      path.join(__dirname, '..', 'data', 'data.json')
    ))
    this.propertyMask = (1 &lt;&lt; this.data.propertyBits) - 1
    this.categoryMask = (1 &lt;&lt; this.data.categoryBits) - 1
    this.scriptMask = (1 &lt;&lt; this.data.scriptBits) - 1
  }

  /**
   * Information about a single Unicode codepoint.
   *
   * @typedef {object} CodePoint
   * @property {number} code - codepoint as a number
   * @property {"DISALLOWED"|"PVALID"|"CONTEXTO"|"CONTEXTJ"} property - IDNA
   *   2008 derived property
   * @property {string} script - Script name
   * @property {string} category - General category
   */
  /**
   * Get information about a single codepoint.
   *
   * @param {number} code - the codepoint
   * @return {CodePoint}
   */
  get(code) {
    const x = this.trie.get(code)
    // Thanks to https://github.com/foliojs/unicode-properties for showing me
    // how to do this.

    // x can be invalid (32768), error (65536), or a 15 bit integer
    // with the following fields or'd together:
    // cccccSSSSSSSSpp
    // categoryBits: 5
    // scriptBits: 8
    // propertyBits: 2

    if (x === this.data.invalid) {
      return null
    }
    if (x === this.data.error) {
      throw new Error('Trie error')
    }
    const num = (x >> this.data.scriptShift) &amp; this.scriptMask
    const s = this.data.scripts.find(props => props[1] === num)

    return {
      code,
      property: this.data.properties[
        (x >> this.data.propertyShift) &amp; this.propertyMask
      ],
      category: this.data.categories[
        (x >> this.data.categoryShift) &amp; this.categoryMask
      ],
      script: s[0]
    }
  }
}

module.exports = Chars
</code></pre>
        </article>
    </section>




</div>

<br class="clear">

<footer>
    Generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.6.6</a> using the Minami theme.
</footer>

<script>prettyPrint();</script>
<script src="scripts/linenumber.js"></script>
</body>
</html>
